apiVersion: v1
data:
  db.conf: |-
    endpoint=127.0.0.1:1234
    name=app
    user=admin
    pass=/var/run/secrets/db/dbpass.txt
  ldap.conf: |-
    endpoint=ldap://ldap.example.com
    bindDN=cn=admin,dc=example,dc=com
    pass=/var/run/secrets/ldap/ldappass.txt
  main.conf: '| color=cornflower_blue log_level=info'
kind: ConfigMap
metadata:
  name: conf-642k56c4mf
---
apiVersion: v1
data:
  dbpass.txt: aGVsbG8gd29ybGQ=
kind: Secret
metadata:
  name: dbpass-bm8b2mkbtb
type: Opaque
---
apiVersion: v1
data:
  ldappass.txt: bGRhcCBwYXNzd29yZA==
kind: Secret
metadata:
  name: ldappass-cg54t754kk
type: Opaque
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: example
spec:
  selector:
    matchLabels:
      name: example
  template:
    spec:
      containers:
      - image: example:1.0
        name: example
        resources:
          limits:
            cpu: 500m
            memory: 256Mi
          requests:
            cpu: 100m
            memory: 128Mi
        volumeMounts:
        - mountPath: /var/run/secrets/ldap/
          name: ldappass
        - mountPath: /var/run/secrets/db/
          name: dbpass
        - mountPath: /etc/config
          name: conf
      metadata:
        labels:
          name: example
      volumes:
      - name: ldappass
        secret:
          secretName: ldappass-cg54t754kk
      - name: dbpass
        secret:
          secretName: dbpass-bm8b2mkbtb
      - configMap:
          name: conf-642k56c4mf
        name: conf
